<div class="container p-3 col-8">

  <div class="card flex-row">
    <div class="card-left">
      <% if @theme.photos.attached? %>
        <% @theme.photos.each do |photo| %>
          <%= cl_image_tag(photo.key, height: 300, width: 400, crop: :fill) %>
        <% end %>
      <% else %>
        <img src="https://images.unsplash.com/photo-1464047736614-af63643285bf?ixlib=rb-1.2.1&ixid=MXwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHw%3D&auto=format&fit=crop&w=967&q=80" alt="pic">
      <% end %>
    </div>
    <div class="card-right d-flex align-items-start flex-column p-3 w-50">
      <div class="card-title d-flex justify-content-between mb-auto">
        <div>
          <h2 class="p-3"><%= @theme.name.capitalize %></h2>
        </div>
        <div class="p-3">
          <% if current_user == @theme.user %>
            <%= link_to "Edit", edit_theme_path %>
            <%= link_to "Delete", theme_path(@theme, { redirect_to: themes_path }), method: :delete, data: { confirm: "Are you sure?"} %>
          <% end %>
        </div>
      </div>
      <div class="pl-3">
        <p><%= @theme.description %></p>
        <p id="price"><%= number_to_currency(@theme.price) %> /day</p>
        <p><%= @theme.address %></p>
        <p><%= @theme.user.email %></p>
      </div>
    </div>
  </div>

  <div class="card p-4 my-2">
    <%= simple_form_for([@theme, @booking]) do |f| %>
      <%= f.input :starting_date, as: :string, required: false, input_html: {id: "start_date"} %>
      <%= f.input :ending_date, as: :string, required: false, input_html: {id: "end_date"} %>
      <%= f.button :submit, "Book", class: "btn btn-info" %>
    <% end %>
  </div>

  <div class="card card-list">
    <!-- new reviews to be added here-->
    <% if @theme.bookings.include? (current_user.booking) %>
      <%= simple_form_for([@theme, @review]) do |f| %>
        <%= f.input :content, as: :text %>
        <%= f.button :submit, "+", class: "btn btn-info" %>
      <% end %>
  </div>
</div>
